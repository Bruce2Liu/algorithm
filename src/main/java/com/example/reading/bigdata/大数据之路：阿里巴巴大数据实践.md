# 前言：数据采集作为大数据体系的第一环尤为重要，应该致力全面、高效、规范地完成海量数据的采集，并将其传输至大数据平台
## 总述
1. 数据模型和体系，数据易用，避免重复建设和数据不一致性，数据的规范性，数据质量保障，管理存储和计算
## 1数据技术篇
### 2.1浏览器页面日志采集
1. 日志采集方案
    + Aplus.JS(Web端)
        +
    + UserTrack(APP端)          
2. 浏览器页面日志采集
    + （1）页面浏览日志：页面浏览量（PV）和访客数（UV）
    + （2）页面交互日志：量化获知用户的兴趣点、体验优化点
3. ali页面浏览日志采集方案流程框架

4. 页面日志的服务端清洗和离线预处理
    + 识别流量攻击、网络爬虫和流量作弊（虚假流量）
        + 合法性校验，过滤规则
        + 长期而且艰苦的对抗过程
    + 数据项补正
        + 保证基本数据统计口径一致：取值归一、标准化处理或反向补正
    + 无效数据删除
        + 无意义、失效、冗余数据
        + 消耗存储和运算、干扰正常计算
    + 日志隔离分发
        + 日志进入公共环境之前作隔离
###2.3日志采集挑战
1. 挑战
    + 日志数据的结构化和规范化组织，实现更为高效的下游统计计算，提供符合业务特征的数据展现；以及为算法提供更便捷、灵活的支持等
    + 日志本身不是日志采集的目的，服务于基于日志的后续应用，才是日志采集正确的着眼点
2. 典型场景及解决方案
    + 规范制定-元数据注册-日志采集-自动化计算-可视化展现全流程
    + 端上埋点采集、日志服务器收集、数据传输、日志实时解析、实时分析
##3数据同步
1. 数据采集分为日志采集和数据库同步；数据同步技术更通用的含义是不同系统间的数据流转，有多种不同应用场景
###3.1数据同步基础
数据：来自数据库、文件系统的结构化和非结构化数据
1. 同步方式
    + 直连同步
        + 通过定义好的API和基于动态链接库的方式直接连接业务库
        + 优点：配置简单，易实现
        + 缺点：对业务系统性能影响较大
        + 适用场景：适合操作业务系统的数据同步
    + 数据文件同步
        + 直接从源系统生成数据的文本文件，由专门的文件服务器传输到目标系统后，加载到目标数据库系统中
        + 优点：
        + 缺点：文件服务器上传，下载可能会造成丢包或错误（上传一个校验文件[记录文件数据量、文件大小]）
        + 适用场景：数据源包含多个异构的数据库系统
    + 数据库日志解析同步
        + 应用于业务系统到数据仓库的增量数据同步应用之中
        + 优点：实现实时和准实时同步的能力
        + 缺点：投入大，数据漂移和遗漏
### 3.2阿里数据仓库的同步方式
1. 数据仓库的特性是集成，将不同数据源、不同形式的数据整合在一起；
需要针对不同数据源类型和数据应用的时效性而采取不同的策略
2. 批量数据同步
    + 原理：实现各类数据库系统与数据仓库之间的批量双向数据同步，就需要先将数据转为中间状态，统一数据格式
    + 阿里DataX
3.实时数据同步
    + 案例：日志数据同步
        + 系统业务数据实时处理——“双11”数据大屏
        + 通过解析MySql的binlog日志来实时获得增量的数据更新；
        通过消息订阅模式来实现数据的实时同步，通知订阅这些数据的数据仓库系统来获取
        + 阿里的TimeTunnel（TT）就是如此的数据传输平台
### 3.3数据同步问题案例和解决方案
1. 分库分表处理
    + 建立中间状态的逻辑表整合统一分库分表的访问——TDDL（Taobao Distributed Data Layer）
2. 高效同步和批量同步
    + 数据同步的集中化建设和管理
3. 增量与全量同步的合并
4. 同步性能和数据漂移
        
        

























    
